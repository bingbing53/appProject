(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a4e831c"],{"187a":function(e,s,t){"use strict";t("28a5"),t("a481"),t("96cf");var a=t("1da1"),i=t("8288"),n=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/address/0").then((function(e){s=e}));case 2:return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/willCategoryList").then((function(e){s=e}));case 2:return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],l=[1,0,10,9,8,7,6,5,4,3,2],o=function(e){if(void 0==e||null==e)return!1;if(e=f(e.replace(/ /g,"")),15==e.length)return h(e);if(18==e.length){var s=e.split("");return!(!u(e)||!c(s))}return!1};function c(e){var s=0;"x"==e[17].toLowerCase()&&(e[17]=10);for(var t=0;t<17;t++)s+=d[t]*e[t];var a=s%11;return e[17]==l[a]}function u(e){var s=e.substring(6,10),t=e.substring(10,12),a=e.substring(12,14),i=new Date(s,parseFloat(t)-1,parseFloat(a));return i.getFullYear()==parseFloat(s)&&i.getMonth()==parseFloat(t)-1&&i.getDate()==parseFloat(a)}function h(e){var s=e.substring(6,8),t=e.substring(8,10),a=e.substring(10,12),i=new Date(s,parseFloat(t)-1,parseFloat(a));return i.getYear()==parseFloat(s)&&i.getMonth()==parseFloat(t)-1&&i.getDate()==parseFloat(a)}function f(e){return e.replace(/(^\s*)|(\s*$)/g,"")}var p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s,t){var a,n,r,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(d in n={},r=0==t?"/api/work/cutIdCard":"/api/wechatComm/upload",s)n["baseImage_"+d]=encodeURIComponent(s[d]);return e.next=5,i["a"].post(r,n).then((function(e){a=e}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(s,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/saveWillRecord",s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),m=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/getPersonInfo",s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),w=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/willrecord",{pageNo:s}).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),x=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/v2/departWillrecord",s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),g=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s,t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/replyWill/"+s,{content:t}).then((function(e){a=e}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(s,t){return e.apply(this,arguments)}}(),_=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/cantSolve/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),b=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/canSolve/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),I=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/cancelWillRecord/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),L=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/resumeWillRecord/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),y=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/api/work/deleteWillRecord/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),P=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/api/work/getMineWillRecordDetail/"+s).then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();s["a"]={getWillCategoryList:r,submitForm:v,searchPersonID:m,uploadImage:p,checkIdCard:o,storageopinion:_,unstorageopinion:b,HistoryRecordList:w,HistoryRecordListAll:x,delopinion:y,getMyopinionDetail:P,callbackopinion:g,deleopinion:I,recoverOpinion:L,getAllcummunity:n}},3846:function(e,s,t){t("9e1e")&&"g"!=/./g.flags&&t("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:t("0bfb")})},"3ef2":function(e,s,t){},"6b54":function(e,s,t){"use strict";t("3846");var a=t("cb7c"),i=t("0bfb"),n=t("9e1e"),r="toString",d=/./[r],l=function(e){t("2aba")(RegExp.prototype,r,e,!0)};t("79e5")((function(){return"/a/b"!=d.call({source:"a",flags:"b"})}))?l((function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!n&&e instanceof RegExp?i.call(e):void 0)})):d.name!=r&&l((function(){return d.call(this)}))},"7f7f":function(e,s,t){var a=t("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,r="name";r in i||t("9e1e")&&a(i,r,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},"95cc":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e._l(e.address,(function(e,s){return t("div")})),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showAddress,expression:"showAddress == 1"}],staticClass:"pd-10 bgcw2"},["2"==e.investType?t("div",{staticClass:"f-16 pb-10 mt-20 text-c"},[e._v("家庭居住地址录入")]):e._e(),"3"==e.investType?t("div",{staticClass:"f-16 pb-10 mt-20 text-c"},[e._v("房屋产权地址录入")]):e._e(),t("div",{staticClass:"mb-50"},[t("van-cell-group",[t("van-field",{attrs:{placeholder:"选择社区",disabled:""},on:{click:e.address0_pop},model:{value:e.address[0].value,callback:function(s){e.$set(e.address[0],"value",s)},expression:"address[0].value"}}),t("van-field",{attrs:{placeholder:"选择小区",disabled:""},on:{click:e.address1_pop},model:{value:e.address[1].value,callback:function(s){e.$set(e.address[1],"value",s)},expression:"address[1].value"}}),t("van-field",{attrs:{placeholder:"选择楼宇",disabled:""},on:{click:e.address2_pop},model:{value:e.address[2].value,callback:function(s){e.$set(e.address[2],"value",s)},expression:"address[2].value"}}),t("van-field",{attrs:{placeholder:"请输入单元号"},model:{value:e.address[3].value,callback:function(s){e.$set(e.address[3],"value",s)},expression:"address[3].value"}}),t("van-field",{attrs:{placeholder:"请输入房间号"},model:{value:e.address[4].value,callback:function(s){e.$set(e.address[4],"value",s)},expression:"address[4].value"}})],1),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.address0,callback:function(s){e.address0=s},expression:"address0"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.address[0].range,(function(s,a){return t("div",[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",class:{select_spaned:a==e.index_selectspan},on:{click:function(t){return e.address0_click(a,s.name,s.code,0)}}},[e._v("\n              "+e._s(s.name)+"\n            ")])])})),0)])]),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.address1,callback:function(s){e.address1=s},expression:"address1"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.address[1].range,(function(s,a){return t("div",[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",class:{select_spaned:a==e.index_selectspan},on:{click:function(t){return e.address1_click(a,s.name,s.code,1)}}},[e._v("\n              "+e._s(s.name)+"\n            ")])])})),0)])]),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.address2,callback:function(s){e.address2=s},expression:"address2"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.address[2].range,(function(s,a){return t("div",[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",class:{select_spaned:a==e.index_selectspan},on:{click:function(t){return e.address2_click(a,s.name,s.code,2)}}},[e._v("\n              "+e._s(s.name)+"\n            ")])])})),0)])])],1),"2"==e.investType?t("van-button",{staticClass:"familymess",attrs:{round:"",type:"info",size:"large"},on:{click:e.startSurvey}},[e._v("填写家庭成员信息")]):e._e(),"3"==e.investType?t("van-button",{staticClass:"familymess",attrs:{round:"",type:"info",size:"large"},on:{click:e.startSurvey}},[e._v("填写房产信息")]):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.showAddress,expression:"showAddress == 2"}],staticClass:"pd-10 bgcw2"},[t("div",{staticClass:"f-16 pb-10 mt-20 text-c"},[e._v("填写房产信息")]),e._l(e.houseInfo,(function(s,a){return t("div",[t("div",{staticClass:"f-16 pb-10 mt-10"},[t("span",{staticClass:"indexspan"},[e._v(e._s(a+1))]),e._v("\n        "+e._s(s.label)+"\n      ")]),t("van-cell-group",[t("van-field",{attrs:{disabled:""},on:{click:function(s){return e.propertyPop(a)}},model:{value:e.houseInfo[a].value,callback:function(s){e.$set(e.houseInfo[a],"value",s)},expression:"houseInfo[index].value"}})],1),"dropdown"===s.field_type?t("div",{staticStyle:{"margin-bottom":"20px"}},[t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.showPropertyInfo,callback:function(s){e.showPropertyInfo=s},expression:"showPropertyInfo"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.houseInfo[e.houseIndex].field_options.options,(function(s,a){return t("div",[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",class:{select_spaned:a==e.index_selectspan},on:{click:function(t){return e.pickPropertyInfo(a,s.label,s.code.indexpro,e.houseIndex)}}},[e._v("\n                  "+e._s(s.label)+"\n                ")])])})),0)])])],1):e._e()],1)})),"3"==e.investType?t("van-button",{staticClass:"familymess",attrs:{round:"",type:"info",size:"large"},on:{click:function(s){e.showAddress=0}}},[e._v("填写产权人信息")]):e._e()],2),0==e.showAddress?t("div",{staticClass:"bgcw2"},[e._l(e.detailList,(function(s,a){return t("div",[a===e.showIndex&&e.pcount>1?t("div",{staticClass:"text-c c-999 f-16 pd-10"},[e._v("调查成员"+e._s(a+1))]):e._e(),a===e.showIndex?t("div",{staticClass:" pt-15 pb-15"},[e.detailList[e.showIndex].tempFile?t("div",{staticClass:"text-c choise mb-20 choiseID"},[t("van-uploader",{attrs:{"max-count":1,"after-read":e.choiseImage},model:{value:e.fileList[a].arrimg,callback:function(s){e.$set(e.fileList[a],"arrimg",s)},expression:"fileList[index].arrimg"}})],1):e._e(),""===e.detailList[e.showIndex].tempFile?t("div",{staticClass:"text-c choise pt-30 mb-20"},[t("van-uploader",{staticClass:"uploaderHeader",attrs:{"max-count":1,"after-read":e.choiseImage},model:{value:e.fileList[a].arrimg,callback:function(s){e.$set(e.fileList[a],"arrimg",s)},expression:"fileList[index].arrimg"}}),t("br"),t("span",{staticClass:"c-999 f-14"},[e._v("添加身份证照片")])],1):e._e(),t("p",{directives:[{name:"show",rawName:"v-show",value:1==e.showTip,expression:"showTip == true"}],staticClass:"f-12 mb-5 f-orange text-c pb-5"},[t("br"),t("van-icon",{attrs:{name:"warning-o"}}),e._v("为保证身份证照片识别率高,请竖持手机拍摄\n        ")],1),t("div",{staticClass:"bgcy"}),e._l(e.detailList[e.showIndex].fields,(function(s,i){return t("div",{staticClass:"pd-10"},["居住地址"==s.label?t("div",{staticClass:"f-16 pb-10 mt-10 pr-10",on:{click:e.pickAddress}},[t("span",{staticClass:"indexspan"},[e._v(e._s(s.position))]),e._v(" \n                "+e._s(s.label)+" \n              "),!0===s.required?t("span",{staticClass:"f-red"},[e._v("*")]):e._e(),t("span",{staticClass:"c-999 right"},[t("van-icon",{attrs:{name:"arrow"}})],1)]):"房屋地址"==s.label||"家庭地址"==s.label?t("div",{staticStyle:{display:"none"}}):t("div",{staticClass:"f-16 pb-10 mt-10 pr-10"},[t("span",{staticClass:"indexspan"},[e._v(e._s(s.position))]),e._v(" "+e._s(s.label)+"\n              "),!0===s.required?t("span",{staticClass:"f-red"},[e._v("*")]):e._e(),"idcard"===s.name?t("van-button",{staticClass:"right",attrs:{type:"primary",size:"small"},on:{click:function(s){return e.searchPerson(i)}}},[e._v("搜索")]):e._e(),t("div",{staticClass:"clear"})],1),"image"===s.field_type?t("div",{staticClass:"text-c"},[void 0!=e.detailList[e.showIndex].tempHeadImage&&""!=e.detailList[e.showIndex].tempHeadImage?t("img",{staticStyle:{width:"40%"},attrs:{src:e.detailList[e.showIndex].tempHeadImage,mode:"widthFix"}}):t("div",{staticClass:"placeimage"},[t("van-icon",{attrs:{name:"manager-o"}})],1)]):e._e(),"text"===s.field_type?t("div",[(s.field_options.integer_only,t("div",[t("van-cell-group",[t("van-field",{attrs:{placeholder:s.field_options.description,maxlength:s.field_options.maxlength},model:{value:e.detailList[e.showIndex].fields[i].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i],"value",s)},expression:"detailList[showIndex].fields[indexPerson].value"}})],1)],1))]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:"radio"===s.field_type,expression:"itemPerson.field_type === 'radio'"}],staticStyle:{"margin-bottom":"20px"}},[t("van-radio-group",{on:{change:function(s){return e.radioChange(s,i,a)}},model:{value:s.field_options[i],callback:function(t){e.$set(s.field_options,i,t)},expression:"itemPerson.field_options[indexPerson]"}},e._l(s.field_options.options,(function(s,a){return t("div",{key:a,staticClass:"bgcw2"},[null!=s.code&&"undefiend"!=s.code&&""!=s.code?t("van-radio",{staticClass:"border_style mt-5",attrs:{name:s,value:s.code,checked:e.detailList[e.showIndex].fields[i].code===s.code}},[e._v(e._s(s.label))]):e._e(),null==s.code||"undefiend"==s.code||""==s.code?t("van-radio",{staticClass:"border_style mt-5",attrs:{value:s.label,name:s,checked:e.detailList[e.showIndex].fields[i].code===s.code}},[e._v(e._s(s.label))]):e._e()],1)})),0)],1),"checkboxes"===s.field_type?t("div",{staticStyle:{"margin-bottom":"20px"}},e._l(s.field_options.options,(function(s,n){return t("van-checkbox",{key:n,staticClass:"border_style mt-5 bgcw2",attrs:{name:s.label},on:{change:function(t){return e.checkboxChange(s.checked,s.label,i,a)}},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"checkbox.checked"}},[e._v(e._s(s.label))])})),1):e._e(),"dropdown"===s.field_type?t("div",{staticStyle:{"margin-bottom":"20px"}},[t("van-cell-group",[t("van-field",{attrs:{placeholder:"点击选择",disabled:""},on:{click:function(s){return e.selectPop(i)}},model:{value:e.detailList[a].fields[i].value,callback:function(s){e.$set(e.detailList[a].fields[i],"value",s)},expression:"detailList[index].fields[indexPerson].value"}})],1),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.selectShow,callback:function(s){e.selectShow=s},expression:"selectShow"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.detailList[e.showIndex].fields[e.select_all_Index].field_options.options,(function(s,i){return t("div",{},[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",class:{select_spaned:i==e.index_selectspan},on:{click:function(t){return e.selectItem(i,s.label,s.code,e.select_all_Index,a)}}},[e._v(e._s(s.label))])])})),0)])])],1):e._e(),"居住地址"==s.label?t("div",[e.detailList[e.showIndex].fields[i].addressPersonal[5].value?t("div",{staticClass:"pl-10 pr-10 f-14"}):t("div",{staticClass:"pl-10 pr-10 f-14 pt-10 pb-10"},[e.detailList[e.showIndex].fields[i].addressPersonal[0].value?t("p",[e._v("\n                      "+e._s(e.detailList[e.showIndex].fields[i].addressPersonal[0].value)+"\n                      "),t("span",{staticStyle:{color:"#999","font-size":"11px"}},[e._v("社区")]),e._v("\n                      "+e._s(e.detailList[e.showIndex].fields[i].addressPersonal[1].value)+"\n                      "),t("span",{staticStyle:{color:"#999","font-size":"11px"}},[e._v("小区")]),e._v("\n                      "+e._s(e.detailList[e.showIndex].fields[i].addressPersonal[2].value)+"\n                      "),t("span",{staticStyle:{color:"#999","font-size":"11px"}},[e._v("楼")]),e._v("\n                      "+e._s(e.detailList[e.showIndex].fields[i].addressPersonal[3].value)+"\n                      "),t("span",{staticStyle:{color:"#999","font-size":"11px"}},[e._v("单元")]),e._v("\n                      "+e._s(e.detailList[e.showIndex].fields[i].addressPersonal[4].value)+"\n                      "),t("span",{staticStyle:{color:"#999","font-size":"11px"}},[e._v("房间")])]):e._e()]),t("van-popup",{style:{height:"100%",width:"100%"},attrs:{position:"right"},model:{value:e.addressShow,callback:function(s){e.addressShow=s},expression:"addressShow"}},[t("div",{staticClass:"pd-10 mg-10"},[t("van-cell-group",[t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{disabled:"",placeholder:"点击选择社区"},on:{click:function(s){return e.personal0_pop(i,0)}},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[0].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[0],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[0].value"}}),t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{disabled:"",placeholder:"点击选择小区"},on:{click:function(s){return e.personal1_pop(i,1)}},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[1].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[1],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[1].value"}}),t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{disabled:"",placeholder:"点击选择楼宇"},on:{click:function(s){return e.personal2_pop(i,2)}},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[2].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[2],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[2].value"}}),t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{placeholder:"请输入单元号"},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[3].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[3],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[3].value"}}),t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{placeholder:"请输入房间号"},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[4].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[4],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[4].value"}})],1),t("p",{staticClass:"f-10 f-red mt-30"},[e._v("      找不到地址请手动填写")]),t("van-cell-group",[t("van-field",{staticClass:"mt-10 mb-10 pt-10 pb-10",attrs:{placeholder:"请输入详细地址"},model:{value:e.detailList[e.showIndex].fields[i].addressPersonal[5].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i].addressPersonal[5],"value",s)},expression:"detailList[showIndex].fields[indexPerson].addressPersonal[5].value"}})],1),t("div",{staticClass:"mt-30"},[t("van-row",{attrs:{type:"flex",justify:"center"}},[t("van-col",{attrs:{span:"6"}},[t("van-button",{attrs:{plain:"",hairline:"",type:"primary",size:"small"},on:{click:function(s){e.addressShow=!1}}},[e._v("取消")])],1),t("van-col",{attrs:{span:"6"}},[t("van-button",{attrs:{plain:"",hairline:"",type:"primary",size:"small"},on:{click:function(s){e.addressShow=!1}}},[e._v("保存")])],1)],1)],1),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.addressDetail0_Show,callback:function(s){e.addressDetail0_Show=s},expression:"addressDetail0_Show"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.detailList[e.showIndex].fields[i].addressPersonal[0].range,(function(s,a){return t("div",{},[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",on:{click:function(t){return e.addressItem0_Personal(i,a,s.name,s.code,s.id)}}},[e._v(e._s(s.name)+" ")])])})),0)])]),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.addressDetail1_Show,callback:function(s){e.addressDetail1_Show=s},expression:"addressDetail1_Show"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.detailList[e.showIndex].fields[i].addressPersonal[1].range,(function(s,a){return t("div",{},[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",on:{click:function(t){return e.addressItem1_Personal(i,a,s.name,s.code)}}},[e._v(e._s(s.name)+" ")])])})),0)])]),t("van-popup",{style:{height:"100%",width:"55%"},attrs:{position:"right"},model:{value:e.addressDetail2_Show,callback:function(s){e.addressDetail2_Show=s},expression:"addressDetail2_Show"}},[t("div",{staticClass:"select_out"},[t("div",{staticClass:"select_inner pd-10"},e._l(e.detailList[e.showIndex].fields[i].addressPersonal[2].range,(function(s,a){return t("div",{},[t("span",{staticClass:"pd-5 mt-5 mb-5 text-c select_span f-14",on:{click:function(t){return e.addressItem2_Personal(i,a,s.name,s.code)}}},[e._v(e._s(s.name)+" ")])])})),0)])])],1)])],1):e._e(),"paragraph"===s.field_type?t("div",[t("div",{staticStyle:{border:"0.266vw solid #f5f5f5"}},[t("van-field",{attrs:{type:"textarea",placeholder:s.field_options.description,maxlength:s.field_options.maxlength,rows:"5",autosize:""},model:{value:e.detailList[e.showIndex].fields[i].value,callback:function(s){e.$set(e.detailList[e.showIndex].fields[i],"value",s)},expression:"detailList[showIndex].fields[indexPerson].value"}})],1)]):e._e(),"section_break"===s.field_type?t("div"):e._e()])}))],2):e._e()])})),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.detailList[e.showIndex].sign&&"1"===e.detailList[e.showIndex].signature,expression:"detailList[showIndex].sign == 0 && detailList[showIndex].signature === '1' "}],staticClass:"mt-10 pd-10"},[t("van-button",{attrs:{size:"small"},on:{click:e.startSign}},[e._v("开始签名")]),t("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right"},on:{opened:e.showcanves},model:{value:e.showPickersign,callback:function(s){e.showPickersign=s},expression:"showPickersign"}},[t("div",{staticClass:"text-c mt-50",staticStyle:{width:"100%"}},[t("canvas",{ref:"canvas",attrs:{id:"canvas",width:"300",height:"300"},on:{touchstart:function(s){return e.canvasDown(s)},touchmove:function(s){return e.canvasMove(s)},mouseup:function(s){return e.canvasUp(s)},touchend:function(s){return e.canvasLeave(s)}}},[e._v("抱歉，您的浏览器不支持canvas元素")])]),t("div",{staticClass:"text-c"},[t("van-button",{staticClass:"mr-5",attrs:{plain:"",hairline:"",type:"primary",size:"small"},on:{click:function(s){e.showPickersign=!1}}},[e._v("取消")]),t("van-button",{staticClass:"mr-5",attrs:{plain:"",hairline:"",type:"primary",size:"small"},on:{click:e.clear}},[e._v("清除")]),t("van-button",{attrs:{plain:"",hairline:"",type:"primary",size:"small"},on:{click:e.saveSign}},[e._v("保存")])],1)]),null!=e.canvasPic[e.showIndex]&&""!=e.canvasPic[e.showIndex]?t("div",{staticStyle:{margin:"10px auto","text-align":"center"}},[t("img",{staticClass:"canvasimg",attrs:{src:e.canvasPic[e.showIndex]}})]):e._e()],1),t("div",{staticClass:"bgcy"}),t("div",{staticClass:"pd-10 text-l"},[t("van-row",{staticClass:"mb-20"},[t("van-col",{attrs:{span:"19"}},["1"===e.addressFirst&&0==e.showIndex&&"2"==e.investType?t("van-button",{attrs:{size:"small"},on:{click:function(s){e.showAddress=1}}},[e._v("编辑家庭地址")]):e._e(),"1"===e.addressFirst&&0==e.showIndex&&"3"==e.investType?t("van-button",{attrs:{size:"small"},on:{click:function(s){e.showAddress=1}}},[e._v("编辑产权地址")]):e._e(),e.showIndex>0&&e.pcount>1?t("van-button",{attrs:{size:"small"},on:{click:function(s){e.showIndex=e.showIndex-1}}},[e._v("上一页")]):e._e(),e._v("   \n          "),e.showIndex<e.pcount-1&&e.pcount>1?t("van-button",{attrs:{size:"small"},on:{click:e.nextPage}},[e._v("下一页")]):e._e()],1),t("van-col",{attrs:{span:"5"}},[t("van-button",{attrs:{type:"info",size:"small"},on:{click:e.formUpload}},[e._v("提交")])],1)],1)],1)],2):e._e()],2)},i=[],n=(t("e17f"),t("2241")),r=(t("6b54"),t("7f7f"),t("28a5"),t("ac6a"),t("96cf"),t("1da1")),d=t("187a"),l=t("dffc"),o=(t("6f45"),{data:function(){return{id:"",investType:"0",detailList:[{sign:0,signature:0}],showIndex:0,pcount:1,showAddress:0,addressFirst:"1",address:[{range:[],list:[],value:""},{range:[],list:[],value:""},{range:[],list:[],value:""},{value:""},{value:""}],addressPersonalIndex:-1,otherAddress:[],checked_checkbox:[],selectShow:!1,addressShow:!1,addressDetail0_Show:!1,addressDetail1_Show:!1,addressDetail2_Show:!1,showPickersign:!1,select_all_Index:1,houseIndex:1,index_selectspan:-1,canvasPic:[],canvas:null,ctx:"",canvesURL:"",fileList:[],showTip:!0,houseInfo:[],showPropertyInfo:!1,address0:!1,address1:!1,address2:!1,idcardArr:[]}},methods:{nextPage:function(){this.showIndex=this.showIndex+1,this.addressPersonalIndex>0&&this.investType},getInvestigationDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var s,t,a,i,n,r,d,o,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].gettemDetail(this.id);case 2:for(s=e.sent,s=JSON.parse(s),this.investType=s.type,t=this,a=s,i=JSON.parse(s.content),a.fields=[],n=0,i.fields.forEach((function(e,s){if("address-family"===e.field_type||"address-property"===e.field_type){var i=e.field_name;i.forEach((function(e,s){t.address[s]={filedName:e,value:"",index:"",list:[],range:[]}})),t.showAddress=1,t.addressFirst="1"}else if("address-personal"===e.field_type){n++;var r=e.field_name;e.addressPersonal=new Array,r.forEach((function(s,t){e.addressPersonal[t]={filedName:s,value:"",index:"",list:[],range:[]}})),t.addressPersonalIndex=s}else e.field_type=e.field_type.split("-")[0],e.name=e.field_name.split("-")[0],e.value="","droitType"!=e.name&&"houseUse"!=e.name&&"isRent"!=e.name&&"liveType"!=e.name&&n++,"dropdown"===e.field_type&&(e.value=e.field_options.options[0].label,e.code=e.field_options.options[0].code,void 0==e.nameArr&&(e.nameArr=[]),void 0!=e.field_options.options&&e.field_options.options.forEach((function(s,t){e.nameArr.push(s.label)})));e.position=n,a.fields.push(e)})),a.sign=0,a.signPic="",a.takePhoto="0",a.tempFile="",r=1,s.pcount&&s.pcount>1&&(r=s.pcount),this.detailList=[],this.houseInfo=[],d=function(e){u.otherAddress.push("");var s=JSON.parse(JSON.stringify(a)),i=JSON.parse(JSON.stringify(a)),n=[];i.fields.forEach((function(s,a){"droitType"!==s.name&&"houseUse"!==s.name&&"isRent"!==s.name&&"liveType"!==s.name||(0==e&&t.houseInfo.push(s),n.push(a))})),n.forEach((function(e,t){for(var a=0;a<i.fields.length;a++){var n=i.fields[a];if("droitType"===n.name||"houseUse"===n.name||"isRent"===n.name||"liveType"===n.name){s.fields.splice(a,1);break}}})),u.detailList.push(s)},o=0;o<r;o++)d(o);for(this.pcount=r,t.address.length>0&&t.getAddressPropertyList(0,""),c=0;c<this.detailList.length;c++)this.fileList.push({arrimg:[]});case 24:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),radioChange:function(e,s,t){var a="",i="";this.detailList[t].fields[s].field_options.options.forEach((function(s,t){s.code===e.code&&(a=s.code,i=s.label)})),""===i&&(i=e.label,a=e.code),this.detailList[t].fields[s].value=i,this.detailList[t].fields[s].code=a},checkboxChange:function(e,s,t,a){if(1==e)this.detailList[a].fields[t].value+=s+",";else{var i=this.detailList[a].fields[t].value.split(",");for(var n in i)s==i[n]&&i.splice(n,1);this.detailList[a].fields[t].value=i.toString()}},selectPop:function(e){this.selectShow=!0,this.select_all_Index=e},selectItem:function(e,s,t,a,i){this.detailList[i].fields[a].value=s,this.detailList[i].fields[a].code=t,this.index_selectspan=e,this.selectShow=!1},pickAddress:function(){this.addressShow=!0},personal0_pop:function(e,s){this.getAddressPersonalList(0,"",e),this.addressDetail0_Show=!0},personal1_pop:function(e,s,t){this.addressDetail1_Show=!0},personal2_pop:function(e,s,t){this.addressDetail2_Show=!0},getAddressPropertyList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s,t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,"",e.next=4,l["a"].getAddressList(s,t);case 4:i=e.sent,i=JSON.parse(i),this.address[s].list=i,this.address[s].range=[],this.address[s].list.forEach((function(e,t){0===s?a.address[s].range.push({name:e.departname,code:e.org_code}):1===s?a.address[s].range.push({name:e.village_name,code:e.id}):2===s&&a.address[s].range.push({name:e.building_name,code:e.id})}));case 9:case"end":return e.stop()}}),e,this)})));function s(s,t){return e.apply(this,arguments)}return s}(),getAddressPersonalList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s,t,a){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getAddressList(s,t);case 2:i=e.sent,i=JSON.parse(i),this.detailList[this.showIndex].fields[a].addressPersonal[s].list=i,this.detailList[this.showIndex].fields[a].addressPersonal[s].range=[],n=this,this.detailList[this.showIndex].fields[a].addressPersonal[s].list.forEach((function(e,t){0===s?n.detailList[n.showIndex].fields[a].addressPersonal[s].range.push({name:e.departname,code:e.org_code,id:e.ID}):1===s?n.detailList[n.showIndex].fields[a].addressPersonal[s].range.push({name:e.village_name,code:e.id}):2===s&&n.detailList[n.showIndex].fields[a].addressPersonal[s].range.push({name:e.building_name,code:e.id})}));case 8:case"end":return e.stop()}}),e,this)})));function s(s,t,a){return e.apply(this,arguments)}return s}(),addressItem0_Personal:function(e,s,t,a,i){this.detailList[this.showIndex].fields[e].addressPersonal[0].value=t,this.detailList[this.showIndex].fields[e].addressPersonal[0].index=s,this.detailList[this.showIndex].fields[e].addressPersonal[0].code=i,this.addressDetail0_Show=!1,this.getAddressPersonalList(1,a,e)},addressItem1_Personal:function(e,s,t,a){this.detailList[this.showIndex].fields[e].addressPersonal[1].value=t,this.detailList[this.showIndex].fields[e].addressPersonal[1].index=s,this.detailList[this.showIndex].fields[e].addressPersonal[1].code=a,this.addressDetail1_Show=!1,this.getAddressPersonalList(2,a,e)},addressItem2_Personal:function(e,s,t,a){this.detailList[this.showIndex].fields[e].addressPersonal[2].value=t,this.detailList[this.showIndex].fields[e].addressPersonal[2].index=s,this.detailList[this.showIndex].fields[e].addressPersonal[2].code=a,this.addressDetail2_Show=!1},startSign:function(){this.showPickersign=!0},saveSign:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var s,t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=canvas.toDataURL("image/jpg"),t=[],t.push(s),e.next=5,d["a"].uploadImage(t);case 5:a=e.sent,a=JSON.parse(a),i=this,a.forEach((function(e,s){i.canvasPic[i.showIndex]=i.common.showPicture(e.url),i.detailList[i.showIndex].signPic=e.url})),this.clearCanvas(),this.showPickersign=!1;case 11:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),clearCanvas:function(){var e=document.getElementById("canvas"),s=e.getContext("2d");s.clearRect(0,0,e.width,e.height)},showcanves:function(){if(null==this.canvas){var e=document.getElementById("canvas");this.canvas=e,this.ctx=this.canvas.getContext("2d");var s=this.canvas.width,t=this.canvas.height;window.devicePixelRatio&&(this.canvas.style.width=s+"px",this.canvas.style.height=t+"px",this.canvas.height=t*window.devicePixelRatio,this.canvas.width=s*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)),this.ctx.lineWidth=2,this.ctx.strokeStyle="#000",this.stage_info=e.getBoundingClientRect()}},canvasDown:function(e){this.canvasMoveUse=!0;var s=e.changedTouches[0].clientX-this.canvas.offsetLeft,t=e.changedTouches[0].clientY-this.canvas.offsetTop;this.ctx.beginPath(),this.ctx.moveTo(s,t)},canvasMove:function(e){if(this.canvasMoveUse){var s,t;e.target;s=e.changedTouches[0].clientX-this.canvas.offsetLeft,t=e.changedTouches[0].clientY-this.canvas.offsetTop,this.ctx.lineTo(s,t),this.ctx.stroke(),window.onload=function(){var e=new MyCanvas;e.drawLine([{x:200.5,y:10},{x:200.5,y:200}],{lineWidth:1,strokeStyle:"rgb(0,0,0)"})}}},canvasUp:function(e){this.canvasMoveUse=!1},canvasLeave:function(e){this.canvasMoveUse=!1},clear:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},choiseImage:function(e){var s=this,t=[];this.detailList[this.showIndex].takePhoto="1",this.common.reduceImage(e,(function(e){t.push(e),s.showIDcardInfo(t)}))},showIDcardInfo:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){var t,a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,d["a"].uploadImage(s,0);case 3:a=e.sent,a=JSON.parse(a);try{i=a,t.detailList[t.showIndex].tempFile=t.common.showPicture(i.obj[0].url),t.detailList[t.showIndex].headImage=i.attributes.cutImage,t.detailList[t.showIndex].tempHeadImage=t.common.showPicture(i.attributes.cutImage,"",!1),r=i.attributes.idcard,t.detailList[t.showIndex].fields.forEach((function(e,s){if("address-family"!=e.field_type&&"address-property"!=e.field_type&&"address-personal"!=e.field_type){var a=e.field_name.split("-");if("idcard"===a[0])t.detailList[t.showIndex].fields[s].value=r.cards[0].id_card_number;else if("personName"===a[0])t.detailList[t.showIndex].fields[s].value=r.cards[0].name;else if("sex"===a[0])"男"===r.cards[0].gender&&(t.detailList[t.showIndex].fields[s].code="0",t.detailList[t.showIndex].fields[s].value="男"),"女"===r.cards[0].gender&&(t.detailList[t.showIndex].fields[s].code="1",t.detailList[t.showIndex].fields[s].value="女");else if("rprDetailAddr"===a[0])t.detailList[t.showIndex].fields[s].value=r.cards[0].address;else if("nationality"===a[0]){var i=e.field_options.options;i.forEach((function(e,a){e.label===r.cards[0].race+"族"&&(t.detailList[t.showIndex].fields[s].value=e.label,t.detailList[t.showIndex].fields[s].code=e.code)}))}}}))}catch(l){Object(n["a"])({message:"识别失败，请保证身份证清晰可辨"})}this.showTip=!1;case 7:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}(),searchPerson:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){var t,a,i,r,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a=this.detailList[this.showIndex].fields[s].value,i={idcard:a},e.next=5,l["a"].getPersonInfo(i);case 5:r=e.sent,r=JSON.parse(r),r.length>0?(d=r[0],t.detailList[t.showIndex].fields.forEach((function(e,s){try{e.name&&d.personName&&("姓名"===e.label?t.detailList[t.showIndex].fields[s].value=d.personName:"手机号"===e.label?t.detailList[t.showIndex].fields[s].value=d.mobilePhone:"身份证"===e.label?t.detailList[t.showIndex].fields[s].value=d.idcard:"性别"===e.label&&(t.detailList[t.showIndex].fields[s].code=d.sex,"0"==d.sex&&(t.detailList[t.showIndex].fields[s].value="女"),"1"==d.sex&&(t.detailList[t.showIndex].fields[s].value="男")))}catch(a){console.log(a)}}))):Object(n["a"])({message:"未查询到此身份证信息，请手动填写"}),this.getPersonAddress(a);case 9:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}(),getPersonAddress:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){var t,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,l["a"].personAddress(s);case 3:if(a=e.sent,a=JSON.parse(a),"{}"==JSON.stringify(a)){e.next=24;break}n=0;case 7:if(!(n<t.detailList[t.showIndex].fields.length)){e.next=14;break}if("address-personal"!==t.detailList[t.showIndex].fields[n].field_type){e.next=11;break}return i=n,e.abrupt("break",14);case 11:n++,e.next=7;break;case 14:t.detailList[t.showIndex].fields[i].addressPersonal[5].value="",t.detailList[t.showIndex].fields[i].addressPersonal[3].value="",t.detailList[t.showIndex].fields[i].addressPersonal[4].value="",t.detailList[t.showIndex].fields[i].addressPersonal[1].list=[],t.detailList[t.showIndex].fields[i].addressPersonal[1].range=[],t.detailList[t.showIndex].fields[i].addressPersonal[2].list=[],t.detailList[t.showIndex].fields[i].addressPersonal[2].range=[],a.otherAddress?t.detailList[t.showIndex].fields[i].addressPersonal[5].value=a.otherAddress:(t.detailList[t.showIndex].fields[i].addressPersonal[3].value=a.unitNo,t.detailList[t.showIndex].fields[i].addressPersonal[4].value=a.houseNo,t.detailList[t.showIndex].fields[i].addressPersonal[0].list=a.communitys,t.detailList[t.showIndex].fields[i].addressPersonal[0].range=[],a.communitys.forEach((function(e,s){t.detailList[t.showIndex].fields[i].addressPersonal[0].range.push(e.departname),e.org_code===a.sysOrgCode&&(t.detailList[t.showIndex].fields[i].addressPersonal[0].value=e.departname,t.detailList[t.showIndex].fields[i].addressPersonal[0].index=s,t.detailList[t.showIndex].fields[i].addressPersonal[0].code=e.ID)})),t.detailList[t.showIndex].fields[i].addressPersonal[1].list=a.villages,t.detailList[t.showIndex].fields[i].addressPersonal[1].range=[],a.villages.forEach((function(e,s){t.detailList[t.showIndex].fields[i].addressPersonal[1].range.push(e.village_name),e.id===a.villageId&&(t.detailList[t.showIndex].fields[i].addressPersonal[1].value=e.village_name,t.detailList[t.showIndex].fields[i].addressPersonal[1].code=e.id)})),t.detailList[t.showIndex].fields[i].addressPersonal[2].list=a.buildings,t.detailList[t.showIndex].fields[i].addressPersonal[2].range=[],a.buildings.forEach((function(e,s){t.detailList[t.showIndex].fields[i].addressPersonal[2].range.push(e.building_name),e.id===a.buindingId&&(t.detailList[t.showIndex].fields[i].addressPersonal[2].value=e.building_name),t.detailList[t.showIndex].fields[i].addressPersonal[2].code=e.id}))),e.next=24;break;case 24:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}(),startSurvey:function(){"3"===this.investType&&this.houseInfo.length>0?this.showAddress=2:this.showAddress=0},pickPropertyInfo:function(e,s,t,a,i){this.houseInfo[a].value=s,this.houseInfo[a].code=t,this.showPropertyInfo=!1,this.index_selectspan=e},propertyPop:function(e){this.showPropertyInfo=!0,this.houseIndex=e},address0_pop:function(){this.address0=!0},address1_pop:function(){this.address1=!0},address2_pop:function(){this.address2=!0},address0_click:function(e,s,t,a){this.address[a].value=s,this.address[a].index=e,this.address0=!1,this.getAddressPropertyList(1,t)},address1_click:function(e,s,t,a){this.address[a].value=s,this.address[a].index=e,this.address1=!1,this.getAddressPropertyList(2,t)},address2_click:function(e,s,t,a){this.address[a].value=s,this.address[a].index=e,this.address2=!1},formUpload:function(){var e=this,s=this,t="是否确认提交调查信息";this.pcount>1&&this.showIndex<this.pcount-1&&(t+="，注意只提交前"+(this.showIndex+1)+"页");var a=[];this.$dialog.confirm({title:"提示",message:t}).then((function(){for(var t=0;t<=s.showIndex;t++)for(var i=0,r=s.detailList[t].fields.length;i<r;i++){if(s.detailList[t].fields[i].required&&""===s.detailList[t].fields[i].value)return Object(n["a"])({message:"请将"+s.detailList[t].fields[i].label+"填写完成"}),void(s.showIndex=t);if("idcard"===s.detailList[t].fields[i].name&&!s.detailList[t].fields[i].value)return Object(n["a"])({message:"身份证不正确"}),void(s.showIndex=t)}for(var d=0;d<=s.showIndex;d++)for(var o=0,c=s.detailList[d].fields.length;o<c;o++)if(s.detailList[d].fields[o].required&&"address-personal"===s.detailList[d].fields[o].field_type&&(""==s.detailList[d].fields[o].addressPersonal[0].value||null==s.detailList[d].fields[o].addressPersonal[0].value)&&(""==s.detailList[d].fields[o].addressPersonal[5].value||null==s.detailList[d].fields[o].addressPersonal[5].value))return Object(n["a"])({message:"请将地址填写完成"}),void(s.showIndex=d);for(var u=[],h=function(e){for(var t=[],a=0,i=s.detailList[e].fields.length;a<i;a++)if("address-property"!==s.detailList[e].fields[a].field_type&&"address-family"!==s.detailList[e].fields[a].field_type)if("address-personal"!==s.detailList[e].fields[a].field_type){var n=s.detailList[e].fields[a].field_name,r=s.detailList[e].fields[a].code;if("image"!==s.detailList[e].fields[a].field_type){var d=s.detailList[e].fields[a].value;t.push({fieldName:n,fieldValue:d,fieldCode:r})}else{var l="";l=s.detailList[e].headImage,t.push({fieldName:n,fieldValue:l,fieldCode:r})}}else s.detailList[e].fields[a].addressPersonal.forEach((function(e,s){void 0!=e.value&&null!=e.value&&""!=e.value&&t.push({fieldName:e.filedName,fieldValue:e.value,fieldCode:e.code})}));u.push(t)},f=0;f<=s.showIndex;f++)h(f);if(s.address.length>0&&(s.address.forEach((function(e,s){if(""!=e.value&&null!=e.value)if(e.list.length>0){var t="",a=e.list[e.index].id;0===s?(t=e.list[e.index].departname,a=e.list[e.index].ID):1===s?(t=e.list[e.index].village_name,a=e.list[e.index].id):2===s&&(t=e.list[e.index].building_name,a=e.list[e.index].id),u[0].push({fieldName:e.filedName,fieldValue:t,fieldCode:a})}else u[0].push({fieldName:e.filedName,fieldValue:e.value})})),console.log(JSON.stringify(s.houseInfo)),s.houseInfo.forEach((function(e,s){u[0].push({fieldName:e.field_name,fieldValue:e.value,fieldCode:e.code})}))),"1"===s.detailList[0].signature)for(var p=0;p<=s.showIndex;p++){if(""===s.detailList[p].signPic)return Object(n["a"])({message:"请签名完成后提交"}),void(s.showIndex=p);a.push(s.detailList[p].signPic)}l["a"].formInfo(s.id,u,a);e.$router.go(-1)})).catch((function(){}))}},mounted:function(){this.id=this.$route.params.id,this.getInvestigationDetail()}}),c=o,u=(t("e3f5"),t("0c7c")),h=Object(u["a"])(c,a,i,!1,null,"54acb712",null);s["default"]=h.exports},a481:function(e,s,t){"use strict";var a=t("cb7c"),i=t("4bf8"),n=t("9def"),r=t("4588"),d=t("0390"),l=t("5f1b"),o=Math.max,c=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};t("214f")("replace",2,(function(e,s,t,v){return[function(a,i){var n=e(this),r=void 0==a?void 0:a[s];return void 0!==r?r.call(a,n,i):t.call(String(n),a,i)},function(e,s){var i=v(t,e,this,s);if(i.done)return i.value;var u=a(e),h=String(this),f="function"===typeof s;f||(s=String(s));var w=u.global;if(w){var x=u.unicode;u.lastIndex=0}var g=[];while(1){var _=l(u,h);if(null===_)break;if(g.push(_),!w)break;var b=String(_[0]);""===b&&(u.lastIndex=d(h,n(u.lastIndex),x))}for(var I="",L=0,y=0;y<g.length;y++){_=g[y];for(var P=String(_[0]),k=o(c(r(_.index),h.length),0),C=[],S=1;S<_.length;S++)C.push(p(_[S]));var R=_.groups;if(f){var O=[P].concat(C,k,h);void 0!==R&&O.push(R);var A=String(s.apply(void 0,O))}else A=m(P,h,k,C,R,s);k>=L&&(I+=h.slice(L,k)+A,L=k+P.length)}return I+h.slice(L)}];function m(e,s,a,n,r,d){var l=a+e.length,o=n.length,c=f;return void 0!==r&&(r=i(r),c=h),t.call(d,c,(function(t,i){var d;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return s.slice(0,a);case"'":return s.slice(l);case"<":d=r[i.slice(1,-1)];break;default:var c=+i;if(0===c)return t;if(c>o){var h=u(c/10);return 0===h?t:h<=o?void 0===n[h-1]?i.charAt(1):n[h-1]+i.charAt(1):t}d=n[c-1]}return void 0===d?"":d}))}}))},e3f5:function(e,s,t){"use strict";var a=t("3ef2"),i=t.n(a);i.a}}]);